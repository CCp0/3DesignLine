document.getElementById("buy-button").addEventListener("click",buyNow);var totalCost=0,userDetails=JSON.parse(window.localStorage.getItem("userdetails"));function boughtProductsDisplay(){let e=document.getElementById("root"),t=[],l=[],a=[],o=[],r=[],d=[],s=[],n=[],u=0,c=0;for(let i=1;i<localStorage.getItem("checkout")+1;i++){t[i]=window.localStorage.getItem("productsList"+i),a[i]=JSON.parse(t[i]),o[i]=document.createElement("div");let m=document.createElement("p");m.textContent="---------------------------------";let g=!0;if(null!=a[i]){for(let e=0;e<l.length;e++)l[e]==a[i].name&&(g=!1,u=e+1);if(1==g)r[i]=document.createElement("h2"),d[i]=document.createElement("img"),r[i].textContent=a[i].name,d[i].setAttribute("src",a[i].image),s[i]=document.createElement("p"),s[i].innerHTML="€"+a[i].price.toFixed(2),console.log(a[i].price),d[i].setAttribute("class","icon float-start"),s[i].setAttribute("id","productPrice"+i),o[i].appendChild(d[i]),o[i].appendChild(r[i]),o[i].appendChild(s[i]),o[i].appendChild(m),e.appendChild(o[i]),l[c]=a[i].name,n[i]=a[i].price,totalCost+=a[i].price,c++;else if(0==g){let e=document.getElementById("productPrice"+u);n[u]+=a[u].price,e.innerHTML=n[u].toFixed(2),totalCost+=a[u].price}}}console.log(totalCost),totalCostDisplay=document.createElement("h3"),totalCostDisplay.innerHTML="Total €"+totalCost.toFixed(2),e.appendChild(totalCostDisplay)}function autofillDetails(){document.getElementById("getFirstName").value=userDetails.firstName,document.getElementById("getLastName").value=userDetails.lastName,document.getElementById("getAddress1").value=userDetails.address3,document.getElementById("getAddress2").value=userDetails.address2,document.getElementById("getAddress3").value=userDetails.address1,document.getElementById("getCardName").value=userDetails.cardName,document.getElementById("getCardNumber").value=userDetails.cardNumber,document.getElementById("getCardCVC").value=userDetails.cvc}function buyNow(){if(console.log(userDetails.cardNumber),document.getElementById("getCardName").value==userDetails.cardName&&document.getElementById("getCardNumber").value==userDetails.cardNumber&&document.getElementById("getCardCVC").value==userDetails.cvc)if(0!=totalCost){for(let e=1;e<localStorage.getItem("checkout")+1;e++)localStorage.removeItem("productsList"+e);localStorage.removeItem("checkout"),localStorage.setItem("checkout",0),alert("Thank you for your order")}else alert("No items in cart; sale void");else alert("Invalid Credit Card Details")}autofillDetails(),boughtProductsDisplay();